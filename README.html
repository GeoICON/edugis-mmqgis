<html>
<head>
<title>MMQGIS</title>
<meta name="keywords" content="Qgis, Quantum GIS, plugin, python, Voronoi"/>
<meta name="description" content="A set of useful python plugins for QGIS"/>
</head>
<body>
<h1>MMQGIS</h1>

<p>Michael Minn (<a href="http://michaelminn.com">http://michaelminn.com</a>)</p>

<p>11 February 2015</p>

<p><em>Describes use of MMQGIS, a set of Python vector map layer plugins for Quantum GIS</em></p>

<!-- =========================================================== -->

<h2>Introduction</h2>

<!--
<p style="color: red; font-weight:bold">This README is for the latest version of MMQGIS that
requires QGIS 2.0 or 2.1 (Master). Users of QGIS 1.8 should upgrade. If you
must use 1.8, you need MMQGIS 
<a href="http://michaelminn.com/linux/mmqgis/mmqgis.2012.12.07.zip">v2012.12.07</a>
and help for that version is available
<a href="http://michaelminn.com/linux/mmqgis/1.8">HERE...</a></p>
-->

<p>MMQGIS is a set of <a href="http://www.python.org">Python</a> plugins
for manipulating vector map layers in <a href="http://www.qgis.org">Quantum GIS</a>:
CSV input/output/join, Geocoding, Geometry Conversion, Buffering, Hub Analysis, Simplification
Column Modification, Color Ramps, and Simple Animation.
MMQGIS provides an alternative to the native QGIS vector plugin set and Sextente,
with verbose progress reporting, an intuitive user interface, direct
shapefile/CSV-file access, and some additional capabilities missing from
other plugin sets.</p>

<p>MMQGIS assumes that input and output shapefiles and CSV files are encoded
in the <b>UTF-8</b> character set. MMQGIS uses the standard Python CSV file interface
functions, which do not handle Unicode or other multi-byte encodings. While
files that use the lower 7-bits of the 8-bit Windoze character sets (ISO-8859-x) will
generally be fine, unpredictable results and errors may occur with non-ASCII
characters in non-UTF-8 character sets.</p>

<p>MMQGIS is free software and is offered without guarantee or warranty. You 
can redistribute it and/or modify it under the terms of version 2 of the GNU 
General Public License (GPL v2) as published by the Free Software Foundation 
(www.gnu.org). Bug reports or suggestions are welcome at the e-mail address 
above, but I cannot promise a prompt or mutually satisfactory resolution.</p>

<!--
<p>MMQGIS has been partially incorporated into Sextante. If you attempt
to install MMQGIS after installing Sextante, you may get the error 
&quot;module' object has no attribute 'classFactory.&quot; This should
be fixed in future versions of Sextante, but if you are still getting this
error and want to have both MMQGIS and Sextante, you should uninstall
Sextente, install MMQGIS and reinstall Sextante.</p>

<p>This document also includes a very basic introduction to writing plugins for
QGIS using Python.</p>
-->


<h2>Installation</h2>

<p><b>Contributed Repository</b>: MMQGIS is included in the 
<a href="http://plugins.qgis.org/plugins/">Quantum GIS Plugin Repository</a> and
should be readily available in the QGIS Python Plugin Installer (Plugins -&gt; Fetch Python Plugins).

<!--
<p><i>Note that QGIS API is undergoing a significant change between versions 1.8 and 1.9 (Master). The
current version of MMQGIS which works with the 1.9 API has been flagged
as experimental so that users of QGIS 1.8 can still load the plugin through
the QGIS Fetch Python Plugins installer. However, this documentation is for the
current version of MMQGIS and upgrade to QGIS 1.9 (Master) is recommended.</i></p>
-->

<!-- <a href="http://pyqgis.org/repo/contributed">QGIS Contributed Repository</a> -->

<p><b>Manual Install</b> If, for some reason, you do not wish to use the QGIS
plugin installer, MMQGIS can be installed manually with the instructions below.
QGIS and the associated packages for using Python plugins.  On Fedora distros,
those packages are:</p>

<pre>
	Python
	Qt
	PyQt
	PyQt-devel
	PyQt4-devel
	QGIS
	QGIS-python
</pre>

<p>On Debian distros, the packages are:</p>

<pre>
	qgis
	python-qgis
	python-qgis-common
	pyqt-tools
	pyqt4-dev-tools
</pre>


<!-- 
yum install qgis-1.0.1-1.fc10.i386
yum install qgis-python-1.0.1-1.fc10.i386

sudo apt-get install python-qgis
python-qgis-common
pyqt-tools
sudo apt-get install pyqt4-dev-tools
-->

<p><b>Download</b> the current version of MMQGIS
<a href="http://michaelminn.com/linux/mmqgis/mmqgis.zip"><b>HERE</b></a>.

<p><b>Unpack</b> the zip file and move the mmqgis directory of files
to the mmqgis plugin directory:</p>

<pre>
	unzip mmqgis.zip 
	mv mmqgis ~/.qgis/python/plugins
</pre>

<p>Optionally, you may install MMQGIS in the shared system plugin
directory if want to share the installation with other users on a
multiuser system or simply do not want extra files clogging your 
/home directory</p>

<p><b>Enable</b> MMQGIS by starting qgis and using the manage plugins
utility (Plugins -&gt; Manage Plugins). The utility pops up a 
list box of all available plugins and you should select the checkbox
beside MMQGIS. After clicking OK, an MMQGIS option should be available
on the PLUGINS dropdownn menu.</p>

<!--
<p><b>Python Library Problem</b>: On some distros (as of this writing),
the QGIS python library (qgis-python) is not installed in a way that makes 
it accessible to QGIS, so the plugins might not be visible from the
Plugins dropdown. This can be fixed by setting up a symbolic link from the 
expected library name to the version of the library that is installed.
<a href="http://lists.osgeo.org/pipermail/qgis-user/2008-December/004177.html">
(reference)</a>:

<pre>
	sudo ln -s /usr/lib/libqgispython.so.1.0 /usr/lib/libqgispython.so
</pre>
-->


<h2>Animate Tools</h2>

<p>The animation tools permit creation of simple map animations as sequences of
map image PNG files. Images may be combined into a single animated GIF 
using <a href="http://gimp.org">Gimp</a>.</p>

<p>Images may be combined into video files using the <b>mencoder</b> program that
comes with <a href="http://www.mplayerhq.hu">mplayer</a>. For example, the following
creates a 15 FPS silent MPEG4 file in an AVI container:</p>

<pre>
mencoder mf://*.png -mf w=640:h=480:fps=15:type=png -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell -oac copy -o output.avi
</pre>

<p>Images are sized with the main window and are exported using the
QgsmapCanvas::saveAsImage() function. This does not permit access to the
layout capabilites of the map composer, so any ornamentation (ex. north arrow, labels)
must be placed on the main map using map features.</p>



<h3>Animate Columns</h3>

<table width="100%" border="0">
<tr>
<td width="40%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_animate_columns_form.png" 
style="width:290px; height:246px; border:none;"/>
</td>
<td width="60%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_animate_columns.gif" 
style="width:400px; height:300px; border:1px solid gray;"/>
</td>
</tr>
</table>

<p>The Animate Columns tool permits animation of map features in a single
layer. The objects are moved over the specified <i>Duration</i> number of
frames in a straight line based on the offsets specified in the <i>Latitude
Offset Column</i> and <i>Longitude Offset Column</i>. Individual PNG images for
each frame are written to the specified <i>Image Output Directory</i></p>

<p>The motion is specified with offsets rather than absolute X/Y values to permit
animation of lines and polygons. The offsets must be specified in the Coordinate
Reference System of the layer being animated. Offsets for points may be calculated by:</p>

<pre>
	offset_long = (end_long - start_long)
	offset_lat = (end_lat - start_lat)
</pre>

<p>If you need more control over paths, you should use the Animate Rows tool,
or Anita Graser's <a href="https://plugins.qgis.org/plugins/timemanager/">TimeManager plugin</a>.</p>

<p>This tool can be slow and processing-intensive if animating a large number
of features.</p>


<h3>Animate Lines</h3>

<table width="100%" border="0">
<tr>
<td width="40%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_animate_lines_form.png" 
style="width:386px; height:278px; border:none;"/>
</td>
<td width="60%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_animate_lines.gif" 
style="width:290px; height:200px; border:1px solid gray;"/>
</td>
</tr>
</table>

<p>The Animate Lines tool facilitates animation of lines that grow to their
full length over the specified <i>Duration</i> of the animation.  Individual
PNG images for each frame are written to the specified <i>Image Output
Directory</i></p>

<p>The timing of line growth can be specified in two ways. 
<i>Different Line Speeds Animated Over Ful Duration</i> will grow all
lines at different speeds so they all complete their full path simultaneously
at the end of the animation. <i>One Line Speed Determined By Longest Line</i>
will grow all lines at the same linear speed, with the speed set by the
longest line, which will complete at the end of the animation.</p>

<p>The direction of growth is determined by the order of the linestring
points in the source file. Depending on how the lines were digitized,
this direction may be opposite of what is desired. To control the 
direction of growth, line vertices in the desired order can be created
in a CSV file and imported with the Geometry Import From CSV File.</p>

<p>If attempting to animate a layer of MultiLineStrings, this tool
will combine the points from all line segments into a single line
of points. This will add spurious line segments to the animation
if the points in the line segments were not ordered in a contiguous
manner when digitized.</p>

<p>Because this tool uses an edit session to modify geometry during
animation, red vertex markers will be visible in the animation
unless turned off in: Settings &gt; Options &gt; Digitizing &gt; Vertex markers.
Choosing &quot;Show markers only for selected features&quot; will
prevent display of vertex markers during animation.</p>


<h3>Animate Rows</h3>

<table width="100%" border="0">
<tr>
<td width="40%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_animate_rows_form.png" 
style="width:290px; height:260px; border:none;"/>
</td>
<td width="60%" valign="top" align="center">
<a href="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_animate_rows.avi">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_animate_rows.gif" 
style="width:400px; height:300px; border:1px solid gray;"/></a>
</td>
</tr>
</table>

<p>The Animate Rows tool permits animation of map features in one or more
layers. The features are moved by plotting successive rows in each layer
selected in the <i>Layers to Animate</i> list box.
The <i>Cumulative</i> checkbox causes features from previous rows to
remain on the map.  Individual PNG images for each frame are written to the
specified <i>Image Output Directory</i></p>

<p>If multiple layers are being animated simultaneously, the timing of rows in
each layer will be the same. There is no capability for interpolating, frame
skipping or frame duplication between layers of dissimilar length.  If there
are fewer rows in one animated layer than in another animated layer, no
features from the shorter layer will be displayed after all rows in the shorter
layer have been displayed.</p>

<p>If text display of timing is desired, a layer must be created
with a column that has the desired display text, and that layer must
be mapped with features labeled.</p>

<p>If you need fine-grained control by specific times or a less cumbersome way
of displaying current time, you may want to consider
using Anita Graser's <a href="https://plugins.qgis.org/plugins/timemanager/">TimeManager plugin</a>.</p>


<!-- ************************************************************ -->

<h2>Combine Tools</h2>

<h3>Attribute Join from CSV File</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_attribute_join_form.png" 
style="width:384px; height:357px; border:none;"/></p>

<p>The join attributes tool permits import of attributes from a CSV file based
on a join using a &quot;key&quot; field that is present both in the CSV file
and in the attribute table of the map layer to which the data is being joined.
The key is specified by selection boxes for CSV File Field and Join Layer
Attribute and do not have to have the same name. The join is similar to an SQL
join and if there are multiple occurances of a key in the CSV or map layer,
there will be multiple combinations of the data in the output shapefile.</p>

<p>A box is also provided to specify the file where unmatched records from the
CSV file are saved for further analysis.

<p>Note that because CSV files contain no reliable type data in the header,
data is always imported from CSV files as text. Text columns can be converted
to numeric (floating point) using the &quot;Text to Float&quot; tool.

<p>CSV files must be encoded in the UTF-8 character set. Although other 8-bit
encodings (like Windoze ISO-8859-x) will work if only ASCII characters are
present, non-ASCII characters may cause unpredictable behavior.</p>

<h3>Merge Layers</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_merge_form.png" 
style="width:378px; height:364px; border:none;"/></p>

<p>The merge layers tool merges features from multiple layers into a single 
shapefile and adds the merged shapefile to the project. One or more layers are 
selected from the &quot;Select Source Layers&quot; dialog list box and an output
shapefile name is specified in the &quot;Output Shapefile&quot; dialog field.</p>

<p>Merged layers must all be the same geometry type (point, polygon, etc.).
If the source layers have different attribute fields (distinguished by name and type), 
the merged file will contain a set of all different fields from the source layers
with NULL values inserted when a source layer does not have a specific output field.</p>


<h3>Spatial Join</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_spatial_join_form.png" 
style="width:446px; height:342px; border:none;"/></p>

<p>A spatial join permits combination of information from different layers
based on spatial relationship. The spatial joins are very common operations
in standard GIS analysis.</p>

<p>The Output Shape (target) Layer indicates the layer that defines the shapes 
that will be the output from the operation.</p>

<p>The Data (join) Layer indicates the layer that will provide the data
output from the operation.</p>

<p>Spatial Operation box allows specification of the relationship
that should be used in the operation: Within, Intersects or Contains. 
Some relationships are not available for some combinations of shapes
(ex: there is no within relationship when joining a polygon target
layer with a point join layer).</p>

<p>Attribute Operation indicates what should be done when multiple
features from the join layer have a relationship with the target layer:
First, Sum, Average, and Proportional Sum. Proportional Sum indicates
that the data from each related feature should be summed in proportion
to the amount of join feature area (in map units) covered by the target feature.
Some operations are not available with some combinations of shapes
(ex: proportional sum is not available for point target layers).</p>

<p>The Fields box permits selection of the combined attributes from both
source layers that will be included in the output. Multiple attributes can
be selected. Selection capability is provided so that the output does not
have to be cluttered with multiple unnecessary attributes.</p>

<p>A COUNT attribute is automatically appended to the output that indicates
the number of related join layer features contributing data to each feature
from the target layer.</p>

<p>Features from the target layer that have no spatial relationship
to the join layer are not included in the output.</p>

<p>The ranges given in the legend are rounded to four significant digits
to avoid the extraneous precision associated with mathematical range calculation.</p>

<!-- ************************************************************ -->

<h2>Create Tools</h2>

<h3>Create Buffers</h3>

<table width="100%" border="0">
<tr>
<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_create_buffers.png" 
style="width:378px; height:297px; border:none;"/>
</td>
<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/buffer-example.png" 
style="width:290px; height:281px; border:none;"/>
</td>
</tr>
</table>

<p>This tool creates polygon buffers around points, lines and polygons.</p>

<p>Point buffers can be created as circles, triangles, diamonds, pentagons or hexagons.</p>

<p>This tool offers a feature for expressing buffer sizes as absolute linear
distance units (miles, feet, meters, kilometers defined by WGS 84 great circle
distance) rather than map units. To approximate meaningful distances
independent of the original projection with normal rounded buffers, the
geometry is transformed to an azimuthal equidistant projection (meters) with
the feature centroid as the origin. While this may introduce some deviation
from the original CRS, buffering is assumed in practice to be an inexact
operation that can usually tolerate such discrepancy.  Map units should be used with
projected data sets to maintain consistency with projected units.</p>

<p>Because of the multiple projection transformations needed to work with real
distances, on large data sets this tool can be quite slow compared to the
native QGIS buffer tools that use only the source layer CRS.</p>

<p>Buffer radius can be fixed for all buffers as specified in the dialog, or
buffer sizes can be taken from an attribute in the source shape layer.</p>

<p>Line buffers can be created as normal rounded-end, single-sided, or
flat-ended. Flat ended buffers are created by dissolving a north-sided and
south-sided buffer for each line. This may cause odd shapes when line ends
point in directions that deviate significantly from the general direction of
the line. With multiple-line features, each line segment is treated as a
separate shape, so angular deviations between line segments may result in 
slivers.</p>

<p>Line buffers can also be north-, south-, east- or west-side only.  The
determination of which side of the line is buffered is determined by the
angular direction of line as defined by the start and end points of the line.
This may result in undesirable results if buffering layers that mix vertically-
and horizontally-oriented features. This tool does not currently have the
capability to buffer based on directional characteristics like traffic or water
flow through the features that lines are used to represent. For lines that are
exactly perpendicular, the west side is considered the north side for north
side buffering. For lines that are exactly horizontal, the south side is
considered the west side.</p>



<h3>Create Grid Lines Layer</h3>

<table width="100%" border="0">
<tr>
<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_grid_form3.png" 
style="width:379px; height:345px; border:none;"/>
</td>
<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/grid-example.png" 
style="width:290px; height:283px; border:none;"/>
</td>
</tr>
</table>

<!-- p>QGIS lacks a native tool for displaying a lat/long grid, so the -->

<p>The MMQGIS grid lines tool creates a line shapefile containing grid lines.
The grid location is specified based on an X value of left, center
or right, and a Y value of top, middle, or bottom, as specified in the
dialog combo boxes.</p>

<p>The width/height 
of the area to cover with gridlines, and the horizontal/vertical spacing 
of the gridlines are also specified in the dialog.</p>

<p>The defaults when the dialog is brought up are set to cover the full 
extent in the project coordinate reference system of the current display 
that is active when the plugin is invoked.</p>

<p>The grid is saved to a shapefile specified in the &quot;Output Shapefile&quot; 
form field.</p>

<p>The Grid Type combo box at the bottom of the dialog allows
selection of four types of grids:</p>

<ul>
<li>Rectangular (line): Creates longitude and latitude lines.</li>

<li>Rectangular (polygon): Creates longitude and latitude lines as
adjacent rectangular polygons. 
The attributes for each polygon are for the center point.</li>

<li>Diamond (polygon): Creates a grid of adjacent diamonds. 
The attributes for each polygon are for the center point.</li>

<li>Hexagon (polygon): Creates a grid of hexagons. To maintain
equilaterality, the ratio between the horizontal and vertical spacing
is fixed (and different). Changing horizontal spacing will automatically
change vertical spacing, and vice versa.
The attributes for each polygon are for the center point.</li>
</ul>

<!--
<p>fTools also has a vector grid tool (Tools -&gt; Research Tools -&gt; Vector grid),
although the fTools gridline placement is specified based on the outer
edges (min/max x/y) rather than from a central point. Specifying from 
a central point with MMQGIS may be useful when drawing a grid relative to some 
specific location.</p>
-->


<h3>Create Grid Points Layer</h3>

<table width="100%" border="0">
<tr>
<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_points_form.png" 
style="width:376px; height:380px; border:none;"/>
</td>
<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_points.png" 
style="width:290px; height:260px; border:none;"/>
</td>
</tr>
</table>

<!-- p>QGIS lacks a native tool for displaying a lat/long grid, so the -->

<p>The MMQGIS grid points tool creates a shapefile containing points in a
regular grid.</p>

<p>The extent of the point grid can be defined either as the entire current map
view (Fill Current Map View) or as the extent of an existing map layer (Fill
Boundary Layer Extent). If the boundary layer is a polygon layer, the points
can be limited to only those contained inside the polygons (Fill Boundary Layer
Polygons).</p>

<p>The spacing of the grid points can be specified in the units for the project
coordinate reference system (CRS) or in absolute values (meters, kilometers,
feet, miles).  The points are aligned on X/Y coordinates that are even
multiples of the spacing parameters unless X/Y offset values are specified.
Note that because of inaccuracies introduced by conversion between map
projections, grids specified with absolute spacing values will generally not
perfectly align with ground measurements.</p>

<p>The output shapefile is created in the same coordinate reference system (CRS)
as the project, regardless of the CRS of the boundary layer. Attributes
include a sequential integer point ID, a sequential integer polygon ID (when
filling polygons, -1 otherwise), and X/Y latitude/longitude coordinates.</p>

<p>The grid is saved to a shapefile specified in the &quot;Output Shapefile&quot; 
form field.</p>


<h3>Create Label Layer</h3>

<table width="100%" border="0">
<tr>
<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_label_layer_form.png" 
style="width:378px; height:252px; border:none;"/>
</td>

<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/label_layer_example.png" 
style="width:295px; height:442px; border:none; float:right;"/>
</td>
</tr>
</table>

<p>Although label placement in QGIS becomes more robust as the software has matured,
individual formatting or placement of dynamically
generated feature labels is still a bit cumbersome. It is possible to add attribute columns to the
feature for setting various &quot;data defined&quot; formatting and positioning 
parameters, although this represents a significant amount of work if you simply
want to drag a few labels to new positions or delete some existing labels.</p>

<p>The create label layer tool provides a way to work around this deficiency 
by creating a point layer with unique attribute values from an existing 
vector layer. Those points can then be labeled and moved at will.</p>

<p>Duplicate labels for multiple features representing a single geographic entity
can be avoided by creating points
only for unique label names. The attributes of each point are the attributes
for the first feature encountered in the source table, although the placement
of the point is determined by a coordinate average of the centers of all
features which have that label.</p>

<p>The create label layer tool has a single dialog box that permits
specification of the source vector layer, the attribute that should be
used for determining unique label text, and a box for the output shapefile.
The label layer will be automatically added to the map, but the user
will need to adjust the properties of the layer to set the attribute
that is used for labeling. Additional points can be added to support
multiline labels.</p>

<p>If some labels need to be individually tweaked for characteristics
other than placement (such as formatting, rotation, font size, bolding, etc.),
attribute columns will need to be added to the point layer that can be
used to specify data defined label characteristics.</p>

<p>Note that if the source data does not have a problem with numerous
redundant labels, a better approach than using this tool may be to
simply add additional attribute columns to the source data for data defined
positioning, formatting, etc. Use of this tool breaks the dynamic linkage 
between data and labels, so that labels will have to be manually adjusted
to reflect changes to the underlying source data.</p>

<!--
<p>It is possible to perform a similar task using the fTools polygon
centroids tool. However, that tool does not work with line or point layers
and does not deal with the problem of redundant labels on multi-feature entites.</p>
-->

<h3>Hub Distance</h3>

<table width="100%" border="0">
<tr>
<td width="40%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_hub_distance_form.png" 
style="width:290px; height:250px; border:none;"/></p>
</td>

<td width="60%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_hub_distance.png" 
style="width:400px; height:234px; border:none;"/>
</td>
</tr>
</table>

<p>The hub distance tool iterates through each feature on the source points layer
and finds the closest &quot;hub&quot; from the destination hubs layer based on
Ellipsoidal distance. The output is a shapefile containing all the attributes from
the source layer along with a distance field and the name of the hub based on an 
attribute selected in the Hub Layer Name Attribute box. </p>

<p>The output shapefile can be either points (one for each source point) or lines
from the source points to the closest hubs.</p>

<p>Distances can be specified in the units selected in the Measurement Unit
combo box. No attempt is made to transform between coordinate systems, so using source
and hub layers with different coordinate systems may yield odd and undesirable
results.</p>

<p>If absolute units are specified (meters, feet, kilometers, miles),
great-circle distances are calculated using the Haversine formula with
Lambert's (1942) formula to correct for ellipisoidal flattening. With layer
units, distances are Euclidian. If your data is projected not WGS84 lat/long),
it may be preferable to use &quot;Layer Units&quot; so the calculated distances
are compatible with the distortions in your layer projection.</p>

<p>This tool does not incorporate any kind of network analysis, so if paths
to hubs are non-linear (e.g. when dealing with city blocks), the closest
Euclidian distance may not be the closed in terms of traveling distance.</p>


<h3>Hub Lines</h3>

<table width="100%" border="0">
<tr>
<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_hub_lines_form.png" 
style="width:503px; height:254px; border:none;"/></p>
</td>

<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_hub_lines.png" 
style="width:290px; height:272px; border:none;"/>
</td>
</tr>
</table>

<p>The hub lines tool creates hub and spoke diagrams with lines drawn from points
on the &quot;Spoke Point&quot; layer to matching points in the &quot;Hub Point&quot;
layer. Determination of which hub goes with each point is based on a match between
the &quot;Hub ID Attribute&quot; on the hub points and the &quot;Spoke Hub ID Attribute&quot;
on the spoke points.</p>

<p>The lines are output to a shapefile of lines and each line
inherits all attributes from the matching spoke points.</p>

<p>No attempt is made to transform between coordinate systems, so using source
and hub layers with different coordinate systems may yield odd and undesirable
results. This tool also does not incorporate any kind of network awareness
(e.g. as when dealing with streets between city blocks), and all lines are
straight lines from spoke to hub.</p>


<h3>Voronoi Diagram</h3>

<table width="100%" border="0">
<tr>
<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_voronoi_form.png" 
style="width:374px; height:197px; border:none;"/>
</td>

<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/voronoi-example.png" 
style="width:372px; height:272px; border:none;"/>
</td>
</tr>
</table>

<p>A Voronoi diagram is a collection of polygons, each surrounding individual points
and representing the area around each point that is closer to that point than any
other. The shapes are named after Russian mathematician Georgy Fedoseevich Voronoi, 
who published a formal definition in 1908, but the concept of this type of polygon 
extends back to Descartes in the 17th century. Similar polygons were famously used 
by physician John Snow to trace the source of a London cholera epidemic in 1854 and
Voronoi diagrams remain useful in GIS for analyzing areas of influence associated 
with individual points within a collection.</p>

<p>The Voronoi diagram tool requires a point layer and outputs a polygon shapefile
with the option to add it to the map. The boundary of the Voronoi diagram is the
min/max extent of the points in the source layer.</p>

<p>The algorithm used to calculate the edges and nodes starts with tangents
at the midpoints of lines between each point. The closest tangent is
assumed to be a border and intersections to the border are calculated to
circle each border until back to the beginning. The algorithm is computationally
intensive, but still seems to run fairly quickly on a reasonably small set
of points.</p>


<!-- ************************************************************ -->

<h2>Geocode Tools</h2>

<h3>Geocode CSV With Web Service</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_geocode_web_service_form.png" 
style="width:474px; height:379px; border:none;"/></p>

<p>This tool imports addresses from a CSV file and uses
either the Google Maps &trade; API or the 
<a href="http://wiki.openstreetmap.org/wiki/Nominatim">OpenStreetMap Nominatim</a> web service
to geocode those addresses. The result is a point
shapefile that is added to the current map, along with a Not Found CSV file containing
all rows that could not be geocoded (for whatever reason).</p>

<p>All columns from the input CSV file are added as attributes in the output
shapefile. Addresses may be spread across as many as four different columns
(street, city, state, country - which are concatenated for the query), although
only one meaningful column is absolutely required (such as for a city/state
combination).</p>

<p>Two additional attributes are added to each shape to preserve exactly what
the web service geocoded so that accuracy can be assessed.  <em>addrtype</em>
is the Google &lt;type&gt; element or OSM class attribute and indicates what
kind of address type this is (street, route, etc). <em>addrlocat</em> is the
Google &lt;location_type&gt; element or OSM type attribute and indicates the
relationship of the coordinates to the addressed feature (rooftop, geometric
center, interpolation, etc).</p>

<p>The input CSV file should be encoded in the UTF-8 character set. Although
other 8-bit encodings (like Windoze ISO-8859-x) will work if only ASCII
characters are present, non-ASCII characters may cause unpredictable
behavior.</p>

<p>If the service returns more than one location for the address, only
the first of the locations will be used for an output feature.</p>

<p>Use of this plugin requires an active Internet connection. Google places
both rate and volume restrictions on the number of addresses that can be
geocoded within various time limits. You should visit Google's
<a href="http://code.google.com/apis/maps/documentation/geocoding/">
Google Geocoding API</a> page for more details, current information and
Google's terms of service.</p>


<h3>Geocode from Street Layer</h3>

<table width="100%" border="0">
<tr>
<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/street-geocode.png" 
style="width:236px; height:590px; border:none;"/></p>
</td>

<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_geocode_street_layer_form.png" 
style="width:496px; height:555px; border:none;"/>
</td>
</tr>
</table>

<p>The street address geocoding tool requires a layer with street centerline
features and attributes indicating the range of addresses associated with each
feature.</p>

<p>Examples of street centerline shapefiles include the US Census Bureau's
<a href="http://www.census.gov/geo/www/tiger/tgrshp2010/tgrshp2010.html">
TIGER/Line Shapefiles</a> and the New York City Department
of City Planning's <a href="http://www.nyc.gov/html/dcp/html/bytes/dwnlion.shtml">
DCPLION files</a>. Shapefiles created as ESRI &quot;address locators&quot; can be used with
this geocoder, but newer version file geodatabases and older Access geodatabases
cannot be used because these proprietary formats are not supported by QGIS.
MapInfo tables are supported and can be used if these are provided as an alternative.</p>


<p>The street centerline layer should have attributes for FROM x/y and TO x/y (in map coordinates),
a range of addresses on the left side, and a range of addresses on the right side.</p>

<p>Optionally, an attribute selector is given to permit the FROM/TO x/y from the shape lines 
themselves can be used (&quot;street line start&quot; and &quot;street line end&quot;). 
However, this assumes that the order of line vertices in the
shapefile consistently starts with FROM or TO points, which may not be true and which
may result in inconsistently geocoded locations.</p>

<p>Addresses (along with other attributes) are read in from a CSV file. Addresses
should have separate attribute fields for number and street name. Optional ZIP Code
fields are provided for additional accuracy when using TIGER/Line files.
The attributes columns from the
street centerline layer can also be selected, although when a layer is selected,
the dialog will attempt to find columns with appropriate names.</p>

<p>The input address CSV file and the street centerline shapefile 
should be encoded in the UTF-8 character set. Although
other 8-bit encodings (like Windoze ISO-8859-x) will work if only ASCII
characters are present, non-ASCII characters may cause unpredictable
behavior.</p>

<p>The &quot;Building
Setback&quot; indicates how far the geocoded points should be set away from the
street centerline (i.e. how far buildings are from the middle of the street,
in map units).</p>

<p>To improve searching, street names are internally modified with common abbreviations 
such as &quot;st&quot; for &quot;street&quot; and &quot;w&quot; for &quot;west&quot;.
This add fuzziness to the search process that may result in unexpected results.
This address handling may be augmented or refined in future releases.</p>

<p>As with many tools of this type, the matching and interpolation is quite
fragile.  Street names in the street layer must match the names in the CSV file
exactly - &quot;First Street&quot; will not match &quot;1st
street&quot;. The tool will also only handle address street numbers that are
entirely numeric - &quot;172-10 Seventh Ave.&quot; or &quot;1872a Main&quot;
will throw fatal errors.</p>

<p>Output is a new point shapefile and a CSV file listing which addresses were
not matched.</p>



<!-- ************************************************************ -->

<h2>Import / Export Tools</h2>


<h3>Attributes Export to CSV File</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_attribute_export_form.png" 
style="width:378px; height:415px; border:none;"/></p>

<p>The export attributes tool saves attributes from a map layer to
a CSV file, which can then be viewed or edited. This can be helpful
when you have some use for the attribute data without the associated
geographic data. When dealing with data sets that have large numbers
of rows or columns, viewing or searching exported data can be simpler
or faster than the QGIS open attribute table, which can be unacceptably
slow with large data sets.</p>

<p>A multiple-selection list box on the dialog permits selection of
the attribute columns to export to a CSV file specified at the
bottom of the form.</p>



<h3>Geometry Export To CSV</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_geometry_export_csv_form.png" 
style="width:379px; height:275px; border:none;"/></p>

<p>Geometry Export to CSV exports points, polylines or polygons to
comma-separated variable (CSV) files.

<p>For point layers, the output CSV file includes an &quot;x&quot; column, a
&quot;y&quot; column, and a &quot;shapeid&quot; column in addition to all
attributes associated with each point.</p>

<p>For polyline and polygon layers, individual nodes of each shape are given a
separate row in the output file. Nodes for each shape have the same
&quot;shapeid&quot; value. Node lines are written in the same sequential order
that nodes occur in the shape. Attributes for each shape are exported to a
separate CSV file, with a &quot;shapeid&quot; column referencing the associated
nodes in the node CSV file.</p>

<p>Elevation (z) export is not currently supported because QGIS geometries
<a href="http://qgis.osgeo.org/api/classQgsPoint.html">do not currently support
z-axis / 2.5D</a></p>

<p>Polygons with holes (inner rings) have hole polygons saved under separate shapeids
that contains &quot;ring&quot; in the name.</p>


<h3>Geometry Import From CSV</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_geometry_import_csv_form.png" 
style="width:392px; height:295px; border:none;"/></p>


<p>Geometry Import From CSV imports points, polylines exports points, polylines
or polygons to comma-separated variable (CSV) files. A combo box is provided to
indicate whether the nodes from the CSV file should be imported as discrete
points, as lines or as polygons.</p>

<p>For point layers, only a single input CSV file is needed that includes
latitude and longitude columns. All other columns are imported as attributes.
This is essentially the same as the &quot;Add Delimited Text Layer&quot; native
QGIS command. Attributes are always imported as text strings and if columns
need to be converted to integer or floating-point types, the MMQGIS &quot;Text
to Float&quot; command should be used.</p>

<p>For polyline and polygon layers, individual nodes of each shape should be
provided on separate rows in an input CSV node file. The file should have three
columns: Latitude, Longitude, and Shape ID. Any additional columns will be
ignored. Nodes for each shape should have the same unique Shape ID value and
should occur in the file in the same sequence that they will be added to the
shape.</p>

<p>If the imported polylines or polygons have additional attributes to be
imported, they should be placed in a separate CSV file with a Shape ID column
to join to the imported nodes using the MMQGIS &quot;Attributes Join From CSV
File&quot; command.</p>

<p>Other than providing a compliment to the &quot;Geometry Export To CSV&quot;
command, this command can be used to import transit &quot;shapes.txt&quot; data from
<a href="http://code.google.com/transit/spec/transit_feed_specification.html">
General Transit Feed Specification (GTFS)</a> releases by transit agencies.</p>

<p>The input CSV file(s) should be encoded in the UTF-8 character set. Although
other 8-bit encodings (like Windoze ISO-8859-x) will work if only ASCII
characters are present, non-ASCII characters may cause unpredictable
behavior.</p>

<p>Type errors such as non-numeric latitude/longitude may throw a cryptic Python error.</p>

<h3>Google Maps (tm) KML Export Form</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_kml_export_form.png"
style="width:379px; height:297px; border:none;"/></p>

<p>Although QGIS permits seamless import and export of formally correct KML files,
the KML is often not optimal for import into Google Maps (tm).</p>

<p>This tool exports features to KML with the capability to explicitly specify
fields for the Name and Description that are always displayed in the current (as of this writing)
default Google Maps (tm) interface.</p>

<p>Multiple fields can be combined in the description. The Description Separator
indicates how multiple fields should be separated: as separate paragraphs, preceded
by a field name in separate paragraphs, or simply separated by commas in a single paragraph.</p>

<p>This tool also exports points using the default Google Maps (tm) PNG icons.
Since a full palette of icon colors is not available, icon colors are
loosely based on the RGB values of point layer symbol colors.</p>


<h3>Search</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_search_form.png" 
style="width:602px; height:414px; border:none;"/></p>

<p>The search tool permits interactive browsing of features that match the
specified search criteria. Results are displayed in a list box at the bottom of
the search dialog.</p>

<p>Clicking one of the features on the results box moves the map canvas to
center that feature in the window.</p>

<p>This tool also provides options in the layer selection combo box for 
searching addresses using Google Maps or Nominatim / Open Street Map.
This option only searches for addresses since generalized serches (such as
for restaurants or landmarks) require use of the Google Places API, which
requires a website-specific API key that cannot be included in a generalized
plugin. Selection of an address only pans the map display to place the 
location in the center of the display, and no markings are added to the map.</p>

<p>Multiple selections in the results list are possible using the CTRL and
SHIFT keys. If multiple features are selected, the map canvas centers on a
central area between the centroids of all selected features.</p>

<p>Layer feature searches can be performed on one or two attribute fields. If a value is
specified for an second attribute, a feature must match BOTH conditions to be
included in the results list.</p>

<p>Possible comparisons on numeric or string attributes are the common
permutations of equal, greater than, or less than. String attributes can be
searched with &quot;contains&quot; or &quot;begins with.&quot; Searches are
case insensitive.</p>

<!--
<p>Export of results can be performed by selecting all desired features in the
results box, then right-clicking on the layer in the Layers pane and selecting
&quot;Save Selection As...&quot;</p>
-->

<h3>Select</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_select_form.png" 
style="width:378px; height:328px; border:none;"/></p>

<p>The select tool permits export of features from a layer based on
comparison to attribute values. The selection is written to a new shapefile.</p>

<p>While the native QGIS export selection capability is suitable
for most select operations, this tool may save time when selecting
from extremely large data sets. The frequent and explicit
status updates also provide awareness and assurance that the software
is not frozen.</p>

<p>The select tool can select based on a single attribute (Select Attribute)
a comparison (equal, not equal, greater, greater equal, less, less equal,
begins with and contains), and a user-specified comparison value. Values can 
be numeric or text and type conversion will be made based on the native type
of the specified selection attribute. The &quot;begins with&quot; and 
&quot;contains&quot; comparisons are meant for strings and may give 
unpredictable results when applied to integer or floating-point attributes.</p>

<p>No capability is provided for complex selections or selection based
on multiple attributes. However, is is generally possible, albeit cumbersome,
to execute multiple selection operations and/or merge operations from 
separate output files to perform complex selections.</p>


<!-- ************************************************************ -->

<h2>Modify Tools</h2>

<h3>Color Ramp</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_color_map_form.png" 
style="width:375px; height:359px; border:none;"/></p>

<p>The color map tool permits assignment of a continuous gradation of customized
symbology colors to both vector and raster layers.</p>

<p>While the new symbology (v1.9)
capabilities of QGIS make this tool less useful than with the older, more-limited
symbology, this tool provides a quick way to deal with custom color schemes,
non-linear scales, and mixed symbol shapes.</p>

<p>The Map Layer and Band/Attribute Name boxes permit selection of the feature
layer that will be colored and the attribute used to determine coloration. 
This tool only works with numeric (integer or floating-point) attributes.</p>

<p>The Ramp Type indicates the way that the fill color ramp values are assigned:</p>

<ul>
<li>Quantiles: Values are ordered from low to high and features are grouped
within each color category so an equal number of features are in each category</li>

<li>Linear: Categories are created by taking the minimum and maximum attribute
values and dividing the range equally by number</li>

<li>Logarithmic: Categories are created by taking the minimum and maximum attribute
values and dividing groups using a pseudo-logarithmic curve. This is useful
when the distribution of values includes a small number of extremely high values
that would distort a linear color ramp.</li>

<li>Exponential: Categories are created by taking the minimum and maximum attribute
values and dividing groups using a pseudo-exponential curve. This is useful
when the distribution of values includes a small number of extremely small values
that would distort a linear color ramp.</li>

<li>Square Root: Categories are created by taking the minimum and maximum attribute
values and dividing groups using a square-root curve. This is useful
when the distribution of values includes a small number of extremely high values
that would distort a linear color ramp, but not enough to justify a more-radical logarithmic curve.</li>

<li>Square: Categories are created by taking the minimum and maximum attribute
values and dividing groups using a squared-value curve. This is useful
when the distribution of values includes a small number of extremely small values
that would distort a linear color ramp, but not enough to justify a more-radical logarithmic curve.</li>

<li>Discrete (Unique Value): The color ramp contains a separate color value for
each different attribute value, ordered from low to high in the ramp. There is
an arbitrary limit of 128 separate values to avoid unwieldy symbology configurations.</li>
</ul>

<p>Color Presets are provided, although custom colors
may be selected by clicking on the &quot;Color...&quot; buttons. Intermediate colors
are computed using linear interpolation of the individual red/green/blue values.</p>

<p>For point features, one of the standard symbol types may be chosen: Circle,
Triangle, Square, Rectangle, Diamond, Pentagon, Hexagon, Star and Arrow. 
&quot;Mixed&quot; sequentially assigns all those shapes (except Arrow) to
the different values.</p>

<p>The Outline color button and Thickness selection box permit definition of the
outline pen color and thickness.</p>

<p>Sizes are specified in map-scale-independent points.</p>


<h3>Convert Geometry</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_geometry_convert_form.png" 
style="width:378px; height:332px; border:none;"/></p>

<p>The Geometry Convert tool changes the geometry types of shapes.</p>

<ul>
<li>All shapes other than points can be converted to centroids or individual node points</li>

<li>Multi-part shapes (multi-point, multi-line, multi-polygon) can be decomposed to 
individual parts (point, line, polygon, respectively)</li>

<li>Single-part shapes can be merged into multi-part shapes based on a common attribute (Merge Field).
Numeric attributes from from the multiple source features will be handled using the Merge Attribute
Operation (First or Sum). String attributes from multiple source features are always merged
using the value from the first encountered feature.</li>

<li>Polygons and multi-polygons can be converted to lines</li>

<li>Shapes with elevation (2.5-D) are converted to X/Y (2-D). This can be helpful
for converting GPS or KML layers to 2-D for merging with other 2-D layers (elevation is discarded)</li>
</ul>

<!--
<p>Note that shapefiles do not support a distinction between PolyLine / MultiPolyLine and
Polygon / MultiPolygon. Therefore, merging shapes from an existing MultiPolyLine or MultiPolygon will
have no effect unless the merge parameter is distinct.</p>
-->

<h3>Delete Columns</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_delete_columns_form.png" 
style="width:378px; height:367px; border:none;"/></p>

<p>The Delete Columns tool permits one or more fields to be deleted from a shapefile
as it is saved to a new shapefile.</p>


<h3>Delete Duplicate Geometries</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_delete_duplicate_form.png" 
style="width:378px; height:189px; border:none;"/></p>

<p>The Delete Duplicate Geometries tool removes duplicates shapes from 
a layer as it saves that layer to a shapefile. Two shapes are considered
duplicates if their geometries are exactly identical, as determined by
the QgsGeometry equals() function. Attributes are not considered, only
geometry.</p>

<p>To improve speed, this tool loads all geometries into memory - which may
cause memory issues with large datasets or large numbers of complex polygons.</p>


<h3>Float to Text</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_float_to_text_form.png" 
style="width:290px; height:323px; border:none;"/></p>

<p>As of this writing, QGIS does not have a feature for number formatting 
when numeric values are used to label features. The Text to Float tool
converts integer and floating point values to strings, with the
ability to specify thousands separators, the number of decimal digits,
prefixes and suffixes (eg. dollar sign prefix or &quot;miles&quot; suffix).
This is the opposite of the &quot;Text to Float&quot; tool.</p>

<p>The Source Layer box is used to select the layer containing the
attributes for conversion. The Fields to Convert selection box is used
to select the attributes to be converted. Multiple fields may be selected.
The Output Shapefile box selects the name of the file where the converted
records will be written.</p>


<h3>Gridify</h3>

<table width="100%" border="0">
<tr>
<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_gridify_form.png" 
style="width:374px; height:258px; border:none; float:right;"/>
</td>

<td width="50%" valign="top" align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/gridify-example.png" 
style="width:290px; height:242px; border:none; float:right;"/>
</td>
</tr>
</table>

<p>The gridify tool permits simplification of points, lines and polygons
in a shapefile by aligning all vertices to a specified grid and then removing
redundant points. This makes it possible to significantly improve display refresh 
time when working with shapefiles that are more detailed than is necessary for
the final map. However, the gridification process can result in some odd artifacts
when viewed at higher resolutions, particularly in dealing with coves and other
appendages along the edges of larger polygons.</p>

<p>The alignment grid is specified with horizontal and vertical spacing. Defaults
are based on 0.5% of the extent of the target layer. The gridified shapes are saved
to a shapefile specified in the &quot;Output Shapefile&quot; form field.</p>


<h3>Sort</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_sort_form.png" 
style="width:378px; height:279px; border:none;"/></p>

<p>The sort tool permits sorting of attribute data and associated shapefile
data to maintain alignment. Sorting is based on a single attribute column
and the result of the sort is saved to a shapefile specified in the Output
Shapefile box. Sorting by attribute can be helpful for ordered CSV export
or when viewing the Attribute Table</p>

<!--
<p>Shapefile attributes are stored in DBase format files (.dbf), which can be 
viewed and edited in external programs like <a href="http://www.openoffice.org">OpenOffice.</a> 
However, the ordering of the data in the .dbf file may not be optimal, but
if the .dbf data is reordered without reordering the associated shapes, the
data will be associated with the wrong shapes, making it useless.</p>
-->


<h3>Text to Float</h3>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/mmqgis_text_to_float_form.png" 
style="width:378px; height:367px; border:none;"/></p>

<p>Numeric values may be stored as text strings in shapefiles, making it impossible
to use them for symbology values. The Text to Float tool converts string
attributes to floating point.</p>

<p>Source Layer selects the layer containing the
attributes for conversion. The Fields to Convert selection box is used
to select the attributes to be converted. Multiple fields may be selected.
The Output Shapefile box selects the name of the file where the converted
records will be written.</p>

<p>Care should be exercised in selecting fields since fields containing
strings that cannot be converted to floating point (e.g. strings with
non-numeric characters) will be assumed to have a value of zero.</p>

<p>Integer fields are converted to floating point, which
should result in no loss of precision but may increase shapefile size.
However, integer strings exceeding MAXINT will get unpredictable
values and there may be some loss of precision when converting
real values with large numbers of digits of significance.</p>


<h2>Version History</h2>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2015.02.11.zip">v2015.02.11</a>
<br/>QDate conversion to yyyy-MM-dd string in export attributes to CSV
<br/>Create Grid Points Layer tool
<br/>Animate Lines tool</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2015.01.29.zip">v2015.01.29</a>
<br/>Correct/swap top/bottom attribute name on create grid
<br/>Spatial join converts integer attributes to real for sum/average/proportional-sum
<br/>Spatial join error check duplicate and ambiguous field names
<br/>Spatial join bug fix attribute sum/average/proportional-sum</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2014.09.19.zip">v2014.09.19</a>
<br/>Allow maximum 10-character field names from Join CSV rather than erroneous 9-character limit
<br/>Bug fix Join CSV handling of multiply-duplicated truncated field names so fields are not lost</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2014.08.25.zip">v2014.08.25</a>
<br/>Work around KML export style and symbolForFeature() API crash bug using start/stopRender()</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2014.08.24.zip">v2014.08.24</a>
<br/>CSV header conversion from UTF-8 so field names can be non-ASCII
<br/>KML export using io.open(encoding=utf-8) to support non-ASCII characters
<br/>Bug fix to save hub distance shapefile as WGS84 rather than source CRS</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2014.08.03.zip">v2014.08.03</a>
<br/>CSV format sniff read 4096 rather than 2048 bytes so error is not thrown on files with long lines</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2014.07.25.zip">v2014.07.25</a>
<br/>Add pixmap parameter to saveAsImage() so animation works with v2.4 asynchronous map refresh</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2014.07.10.zip">v2014.07.10</a>
<br/>mmqgis_merge() add case insensitivity to layer names
<br/>mmqgis_merge() add test for type mismatch for attributes with the same name
<br/>layer.dataProvider().crs() is now just layer.crs()
<br/>Add graceful failure when join by attribute or convert geometry type with no layers
<br/>Add &quot;Only selected features&quot; option for buffers</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2014.06.08.zip">v2014.06.08</a>
<br/>Add "Mixed" symbol types to color ramp
<br/>Add Red-Yellow and Yellow-Red to presets
<br/>Add escapechar to dialect for attribute join notfound CSV write
<br/>Fix mmqgis_round() so created grid centers correctly in WGS 84
<br/>Add addrtype and addrlocat fields for web geocoded addresses
<br/>Upgrade of animate columns to use rolled-back editing sessions rather than temporary layers
<br/>Upgrade of animate rows to use setSubsetString instead of temporary layers
<br/>Upgrade search dialog with Google and OSM search options</p>

<!-- 
<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2014.06.06.zip">v2014.06.06</a>
Release with Search bug
-->

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2014.02.28.zip">v2014.02.28</a>
<br/>Add duplicate node check to Voronoi to avoid creating invalid geometries
</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2014.02.24.zip">v2014.02.24</a>
<br/>Remove leading zeros in metadata.txt version numbers to avoid version
number update loop since http://plugins.qgis.org strips leading zeros.
</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2014.01.06.zip">v2014.01.06</a>
<br/>Remove debug lines from from mmqgis_geocode_street_layer() that were causing IOError on Windoze.
</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2014.01.01.zip">v2014.01.01</a>
<br/>Add OpenStreetMap/Nomatim as web service geocoding option along with the Google
<br/>Add absolute measurement units to Distance to Nearest Hub
<br/>Add flat-end and single-sided buffers for lines
</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2013.06.29.zip">v2013.07.16</a>
<br/>Upgrade mmqgis_search() to use QgsExpression for improved speed
</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2013.06.29.zip">v2013.07.15</a>
<br/>Add Search tool for interactively browsing features
<br/>Add setDragDropMode() to merge layers list so layer merging can be ordered.
</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2013.06.14.zip">v2013.06.14</a>
<br/>Inner rings (holes) are saved as separate polygons in Geometry Export
<br/>metadata.txt minimum version now has to be 2.0.0 to be fetched from repository, even though Master is 1.9
<br/>Fix code broken by more API changes
<br/>QgsFeature::attributes() no longer QVariant (API change in QVariant typecasting?)
<br/>QVariant toString(), toDouble() and toInt() replaced by unicode(), float() and int()
<br/>Coded substitute for removed QgsVectorLayer::featureAtId()
<br/>Conditional call to isUsingRendererV2() - old renderer V1 has been removed</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2013.03.23.zip">v2013.03.23</a>
<br/>Fix overlap/holes topology problem in create grid layer</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2013.03.14.zip">v2013.03.14</a>
<br/>Extensive upgrade to work with new QGIS vector API v1.9
<br/>Menu moved to top-level menu bar and reorganized
<br/>Continued fixes for UTF-8 support in all tools
<br/>Addition of create buffers, spatial join, and Google (tm) maps KML export
<br/>Enhance convert geometry tool to handle conversion from singlepart to multipart 
<br/>Enhancement of color ramp tool (although the QGIS new symbology interface makes this tool less useful)
<br/>Addition of ZIP field to street geocode for TIGER line files</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2012.12.07.zip">v2012.12.07</a>
<br/>Replace QgsRenderer with 
<a href="http://www.qgis.org/pyqgis-cookbook/vector.html#appearance-symbology-of-vector-layers">
QgsRendererV2</a> in animation tools (legacy renderer unsupported in Windoze, V2 unsupported in Linux)</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2012.10.25.zip">v2012.10.25</a>
<br/>__init__.py syntax error</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2012.08.28.zip">v2012.10.19</a>
<br/>Add urllib.quote() to Google geocode to handle non-ASCII address characters</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2012.08.28.zip">v2012.08.28</a>
<br/>mmqgis_select() uses unicode() instead of str() for string conversions
<br/>Upgrade street geocode to be able to use start/end x/y from layer geometries</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2012.05.10.zip">v2012.05.10</a>
<br/>Minimum qgis version now 1.4
<br/>Add exception handling in grid dialog for crs functions new to qgis 1.7 and 2.0
<br/>New tool: Geometry Convert</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2012.05.06.zip">v2012.05.06</a>
<br/>New tools: Animate Rows, Animate Columns, Delete Columns, Float to Text
<br/>text_to_float handles numbers with comma separators
<br/>Hub distance now calculated in meters, Km, feet or miles using QgsDistanceArea
<br/>mmqgis_library functions now return error message rather than creating error message box
<br/>mmqgis_library functions now all have addlayer parameter</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2012.04.06.zip">v2012.04.06</a>
<br/>Catch CSV sniffer errors in attribute join, Google geocode, and geocode streets
<br/>Change qt.4 legacy menu activated() to triggered() 
<br/>Add submenus to facilitate future additions</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2012.01.11.zip">v2012.01.11</a>
<br/>Add Hub Lines tool
<br/>Add Delete Duplicate Geometries</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2011.11.12.zip">v2011.11.12</a>
<br/>Sort by attribute sorts int and float columns numerically</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2011.10.08.zip">v2011.10.08</a>
<br/>Commented out debug lines - causing &quot;Bad file descriptor&quot; error on Windoze</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2011.10.07.zip">v2011.10.07</a>
<br/>Fixed bug in raster color map - slightly better interpolation algorithm</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2011.10.06.zip">v2011.10.06</a>
<br/>Added is_float() tester for import geometry
<br/>Add explicit qgis parameter for mmqgis_read_csv_header()
<br/>Add notes for lack of UTF-8 and Unicode
<br/>Add direction for sort
<br/>Remove google geocode print debug line 494
<br/>Replace color_ramp /tmp directory with mkstemp()</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2011.09.14.zip">v2011.09.14</a>
<br/>Replace all str() with unicode() in mmqgis_dialogs.py to handle non-ASCII characters.</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2011.08.27.zip">v2011.08.27</a>
<br/>Add delimiter and line terminator options to export attributes and export geometry
<br/>Change attribute join text encoding from utf-8 to iso-8859-1 (M$-Windoze charset)
<br/>CSV attribute and geometry export character coding iso-8859-1
<br/>Fix case sensitivity in attribute join duplicate field name correction</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2011.08.22.zip">v2011.08.22</a>
<br/>Bug fix - unicode text handling in join attributes and export geometry</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2011.08.16.zip">v2011.08.16</a>
<br/>Bug fix - disable plugin removes menu entries - mmqgis_menu.unload()</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2011.07.29.zip">v2011.07.30</a>
<br/>Bug fix - bad shape ID on import geometries of points
<br/>Add error handling for CSV import delimiter sniffer exceptions
<br/>New grid types: rectangular polygon, diamond and hexagon</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2011.03.14.zip">v2011.03.14</a>
<br/>Add export / import geometries to / from CSV</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2011.01.21.zip">v2011.01.21</a>
<br/>Modify mmqgis_label_point() to use unicode() rather than str() for point labeling</p> 

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2011.01.08.zip">v2011.01.08</a> 
<br/>Add to <a href="http://pyqgis.org/admin/contributed">Official QGIS repository</a></p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2010.09.26.zip">v2010.09.29</a> 
<br/>- Added color map
<br/>- Added Google (tm) geocode
<br/>- Extensive internal reorganization of code
<br/>- Created mmqgis_library.py</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2010.01.02.zip">
v2010.01.02</a> - Added hub distance and select tools</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2009.09.04.zip">
v2009.09.04</a> - Added text to float tool</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2009.09.01.zip">
v2009.09.01</a> - Added merge layers tool</p>

<p><a href="http://michaelminn.com/linux/mmqgis/mmqgis.2009.08.28.zip">
v2009.08.28</a> - Initial public release</p>




<!--
<hr/>

<h2>Simple Example Plugins</h2>

<p>Following are two simple of examples to demonstrate how to write a Python
plugin for QGIS. Serious programming of such plugins requires knowledge 
of the <a href="http://docs.python.org">Python</a> scripting language,
the <a href="http://doc.trolltech.com">Qt user interface framework API</a>
and the <a href="http://doc.qgis.org/stable/">QGIS programming API.</a>
However, developing plugins is a nice (albeit time-consuming) way to 
learn to use all three.</p>

<h3>Simple Non-Dialog Plugin</h3>

<p>A plugin consists of at least two files: an entry point module named
__init__.py and a plugin class file.</p>

<p>The following is an example __init__.py file simplified from the plugin
example given in the QGIS users manual. It contains six unclassed
methods that give QGIS information about the plugin and a way to access
the plugin class:</p>

<pre style="margin-left: 0.5in">
# -*- coding: utf-8 -*-
from demoplug import demoplug

def name():
	return "Demo QGIS Plugin"

def description():
	return "A simple demo plugin to load shapefiles"

def version():
	return "2009.08.04"

def qgisMinimumVersion():
	return "1.0"

def authorName():
	return "Michael Minn"

def classFactory(iface):
	return demoplug(iface)
</pre>

<p>The first five methods are for identification purposes. The &quot;classFactory&quot;
method calls the constructor for the plugin class, in this case called &quot;demoplug&quot;
and imported (at the top of the file) from the demoplug.py file. This file is as follows:</p>

<pre style="margin-left: 0.5in">
# -*- coding: utf-8 -*-
# Import the PyQt and QGIS libraries
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from qgis.core import *
import os.path

class demoplug:
	def __init__(self, iface):
		# Save reference to the QGIS interface
		self.iface = iface

	def initGui(self):
		# Create action to start plugin config and connect to the run method
		icon = QIcon(os.path.dirname(__file__) + "/demoplug.png")
		self.action = QAction(icon, "Add Vector Layer", self.iface.mainWindow())
		QObject.connect(self.action, SIGNAL("activated()"), self.run)

		self.iface.addPluginToMenu("&amp;demoplug", self.action)

		print 'Loaded demoplug'

	def unload(self):
    		self.iface.removePluginMenu("&amp;demoplug", self.action)
		print 'Unloaded demoplug'

	def run(self):
		fileName = QFileDialog.getOpenFileName(None, \
			QString.fromLocal8Bit("Select a file:"),"", "*.shp *.gml")
		if fileName.isNull():
			QMessageBox.information(None, "Cancel", "File selection canceled")
		else:
			self.iface.addVectorLayer(fileName, "myLayer", "ogr")
</pre>

<p>The initGUI() method is called to add a Plugin menu entry and unload() is
called to remove it from the menu. The run() method (which is an action called
when the plugin menu item is selected) prompts the user for a shapefile
(via the standard Qt open filename dialog) and then adds it as a vector laayer
to the current project.</p>

<p>Create these two files and move them to a subdirectory that you create in the
QGIS plugin directory:</p>

<pre>
	mkdir ~/.qgis/python/plugins/demoplug
	mv __init__.py demoplug.py ~/.qgis/python/plugins/demoplug
</pre>

<p>If you wish, you can also create a 24x24 pixel demoplug.png file with an icon
you want to display in the menu to represent the plugin. </p>

<p>After starting QGIS, under the &quot;Plugins&quot; dropdown should be
an entry to &quot;Manage Plugins...&quot;. Scroll through the list to
find demoplug and click the checkbox to enable it. This should place
it in the menu so it can be run.

<h3>Dialog Plugin</h3>

<p>Most plugins use a custom dialog box to prompt the user for information
needed to perform an operation.</p>

<p align="center">
<img src="http://michaelminn.com/linux/mmqgis/screenshots/demoplugqt-screenshot.png" 
style="width:438px; height:256px; border:none;"/></p>


<p>Dialog boxes can be created with direct Qt API calls, although it is
easier to use the Qt designer application to lay out the dialog and
use the pyuic4 compiler to create the class that can be used by a Python 
plugin.</p>

<p>For this example, the output of the pyuic4 compiler saved in a
third file, mmqgisqtwidgets.py:</p>

<pre style="margin-left: 0.5in">
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'demoplugqtwidgets.ui'
#
# Created: Wed Aug  5 09:23:05 2009
#      by: PyQt4 UI code generator 4.4.4
#
# WARNING! All changes made in this file will be lost!

from PyQt4 import QtCore, QtGui

class Ui_demoplugqtwidgets(object):
    def setupUi(self, demoplugqtwidgets):
        demoplugqtwidgets.setObjectName("demoplugqtwidgets")
        demoplugqtwidgets.resize(384, 105)
        self.buttonBox = QtGui.QDialogButtonBox(demoplugqtwidgets)
        self.buttonBox.setGeometry(QtCore.QRect(110, 60, 160, 26))
        self.buttonBox.setOrientation(QtCore.Qt.Horizontal)
        self.buttonBox.setStandardButtons(QtGui.QDialogButtonBox.Cancel|QtGui.QDialogButtonBox.Ok)
        self.buttonBox.setObjectName("buttonBox")
        self.layerName = QtGui.QLineEdit(demoplugqtwidgets)
        self.layerName.setGeometry(QtCore.QRect(40, 20, 301, 22))
        self.layerName.setObjectName("layerName")

        self.retranslateUi(demoplugqtwidgets)
        QtCore.QObject.connect(self.buttonBox, QtCore.SIGNAL("accepted()"), demoplugqtwidgets.accept)
        QtCore.QObject.connect(self.buttonBox, QtCore.SIGNAL("rejected()"), demoplugqtwidgets.reject)
        QtCore.QMetaObject.connectSlotsByName(demoplugqtwidgets)

    def retranslateUi(self, demoplugqtwidgets):
        demoplugqtwidgets.setWindowTitle(QtGui.QApplication.translate("demoplugqtwidgets", \
		"Dialog", None, QtGui.QApplication.UnicodeUTF8))
</pre>


<p>A demoplugqt.py class file is created to use this dialog:</p>

<pre style="margin-left: 0.5in">
# -*- coding: utf-8 -*-

from PyQt4.QtCore import *
from PyQt4.QtGui import *
from qgis.core import *
from demoplugqtwidgets import Ui_demoplugqtwidgets

import os.path

# ---------------------------------------------

class demoplugqtdialog(QDialog, Ui_demoplugqtwidgets):
	def __init__(self, iface):
		QDialog.__init__(self)
		self.iface = iface
		self.setupUi(self)

# ---------------------------------------------

class demoplugqt:
	def __init__(self, iface):
		self.iface = iface

	def initGui(self):
		icon = QIcon(os.path.dirname(__file__) + "/demoplugqt.png")
		self.action = QAction(icon, "Rename Layer", self.iface.mainWindow())
		QObject.connect(self.action, SIGNAL("activated()"), self.run)

		self.iface.addPluginToMenu("&amp;demoplug", self.action)
		print 'Loaded demoplugqt'

	def unload(self):
    		self.iface.removePluginMenu("&amp;demoplug", self.action)
		print 'Unloaded demoplugqt'

	def run(self):
		print "Running dialog"
		layer = self.iface.activeLayer()
		if layer == None:
			QMessageBox.information(self.iface.mainWindow(), "Rename Layer", \
				"Project has no active layers")
			return
	
		dialog = demoplugqtdialog(self.iface)
		dialog.exec_()

		newname = str(dialog.layerName.displayText()).strip()
		if newname &gt; "":
			layer.setLayerName(newname)
</pre>

<p>A __init__.py file is created with info on the new plugin:</p>

<pre style="margin-left: 0.5in">
# -*- coding: utf-8 -*-
from demoplugqt import demoplugqt

def name():
	return "Demo QGIS Plugin (with Qt dialog)"

def description():
	return "A simple demo plugin to rename layers"

def version():
	return "2009.08.05"

def qgisMinimumVersion():
	return "1.0"

def authorName():
	return "Michael Minn"

def classFactory(iface):
	return demoplugqt(iface)
</pre>

<p>Finally, create a subdirectory in the plugin directory and move these
three files into it.</p>

<pre>
	mkdir ~/.qgis/python/plugins/demoplugqt
	mv __init__.py demoplugqt.py demoplugqtwidgets.py ~/.qgis/python/plugins/demoplugqt
</pre>
-->

<!--
http://wiki.qgis.org/qgiswiki/PythonBindings
http://doc.trolltech.com/4.2/qstatusbar.html#messageChanged

http://www.cs.usfca.edu/~afedosov/qttut/

http://wiki.python.org/moin/JonathanGardnerPyQtTutorial

pyuic4 form1.ui > form1.py


yum install qgis-1.0.1-1.fc10.i386
yum install qgis-python-1.0.1-1.fc10.i386

sudo apt-get install python-qgis
python-qgis-common
pyqt-tools
sudo apt-get install pyqt4-dev-tools

pyuic4 : command not found

pyrcc4 -o resources.py resources.qrc.

               <pointsymbol>svg:/usr/share/qgis/svg/gpsicons/car.svg</pointsymbol>


To provide the neccessary information for QGIS, the plugin needs to implement
the methods 
name(),
description(), 
version(), 
qgisMinimumVersion() 
	return "1.0"

classFactory(QgisInterface) 


/usr/share/qgis/python/plugins
$HOME/.qgis/python/plugins

icon = 24x24

/usr/lib/qt4/bin/designer
-->

</body>
</html>
